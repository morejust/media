(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["readmode"],{"0da0":function(t,e,n){},"43d8":function(t,e,n){},"5b9e":function(t,e,n){"use strict";var r=n("0da0"),i=n.n(r);i.a},7703:function(t,e,n){"use strict";var r=n("43d8"),i=n.n(r);i.a},e80d:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-content",[r("section",[r("v-layout",{attrs:{column:"","align-center":"","justify-center":""}},[r("a",{attrs:{href:"/analyze"}},[r("img",{attrs:{src:n("cf05"),alt:"more just media",height:"200"}})]),r("p",[r("a",{attrs:{href:t.url}},[t._v(t._s(t.url))])]),t.isLoading?r("h1",[t._v("Loading...")]):t._e(),t.error?r("h2",{attrs:{red:""}},[t._v(t._s(t.error))]):r("Article",{attrs:{article:t.article}})],1)],1)])},i=[],o=n("a34a"),a=n.n(o),s=n("19f6"),c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.isShowingTip?n("Tip",{staticClass:"tip",attrs:{text:t.tip,y:t.tipOffset+32}}):t._e(),n("article",{staticClass:"reading-mode simple-container"},[n("h1",[t._v("\n      "+t._s(t.article.title)+"\n    ")]),t.article.fake?n("p",[n("i",{staticStyle:{color:"#dd0000"}},[t._v("This source is known for publishing fake news")])]):t._e(),n("v-layout",{attrs:{"justify-center":""}},[n("v-flex",{attrs:{xs12:""}},[n("v-img",{attrs:{src:t.article.image,"max-heigth":"400px"}})],1)],1),n("p"),t.isHTMLReady?n("v-container",{staticStyle:{"max-width":"100vw"}},[n("InteractiveText",{attrs:{html:t.rawHtml,callback:t.onHighlight}}),n("p",[t._v("\n        Source: "),n("a",{attrs:{href:t.article.url,target:"_blank"}},[t._v(t._s(t.article.url))])])],1):n("p",[t._v("\n      Markup is getting ready...\n      "),n("br"),n("br")])],1)],1)},l=[],u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-layout",{staticClass:"absolute popover",style:"top: "+(t.y||0)+"px"},[n("v-flex",{attrs:{xs12:"",sm4:"","offset-sm8":""}},[n("v-card",{staticClass:"card"},[n("v-card-title",{attrs:{"primary-title":""}},[n("p",[t._v("\n          "+t._s(t.text.title)+"\n        ")]),n("p",{domProps:{innerHTML:t._s(t.text.message)}})])],1)],1)],1)},h=[],f={props:["text","y"]},p=f,g=(n("5b9e"),n("2877")),v=n("6544"),d=n.n(v),m=n("b0af"),y=n("12b2"),b=n("0e8f"),w=n("a722"),x=Object(g["a"])(p,u,h,!1,null,null,null);x.options.__file="Tip.vue";var _=x.exports;d()(x,{VCard:m["a"],VCardTitle:y["a"],VFlex:b["a"],VLayout:w["a"]});var k=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",{domProps:{innerHTML:t._s(t.html)},on:{mouseover:t.doHighlight,click:t.onClick}})},O=[],j={props:["html","callback","highlightClass"],data:function(t){t.html,t.callback;var e=t.highlightClass;return{highlight:e||"highlight",focus:null}},methods:{onClick:function(t){var e=t.target;e===this.focus?this.undoHighlight():this.doHighlight({target:e})},doHighlight:function(t){var e=t.target,n=e.className.split(" ").includes(this.highlight);n?(this.callback(e),this.focus=e):this.undoHighlight()},undoHighlight:function(){this.callback(!1),this.focus=null}}},T=j,A=Object(g["a"])(T,k,O,!1,null,null,null);A.options.__file="InteractiveText.vue";var H=A.exports,S=function(t){var e=t.offset,n=t.type,r=t.content,i=t.properties;switch(console.log("highlight",{offset:e,type:n,content:r,properties:i}),n){case"sentiment":case"sentiment_negative_google":case"sentiment_positive_google":var o=JSON.parse(i)||{},a=parseFloat(o.sentiment)||0;return{title:"\n          '".concat(r,"' has ").concat(a>0?"positive":"negative","\n          sentiment here (").concat(a.toFixed(2),")\n        "),message:"\n          Pay attention to strong emotional message text sends.\n          Usually, it can be used to manipulate your opinion.\n        "};case"fact":return{title:"\n          Does the article prove this fact?\n        ",message:'\n          Looks like this is one of the main messages in the article.\n          Try asking yourself: Could this statement be false?\n\n          <a href="#">It is false? Help us collect the data</a>\n        '};case"generalization":return{title:"\n          '".concat(r,"' is a generalization\n        "),message:"\n          Any general statement is false.\n          No jokes, generalizations tend to overcome need for proof using\n          cherry-picked examples. Look what happens if you replace '".concat(r,"'\n          by 'one of the'\n        ")};case"journalism cliches":return{title:"\n          '".concat(r,"' is a cliche\n        "),message:"\n          That's unprofessional journalism.\n          Writer uses these words when he has nothing to say, but wants to sound smart.\n        "};default:return{title:"\n          '".concat(r,"' is of type '").concat(n,"'\n        "),message:"\n          Our AI highlighter asks you to look closely at this statement.\n        "}}};function L(t){return I(t)||C(t)||P()}function P(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function C(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function I(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}function E(t,e){return R(t)||M(t,e)||V()}function V(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function M(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0)if(n.push(a.value),e&&n.length===e)break}catch(t){i=!0,o=t}finally{try{r||null==s["return"]||s["return"]()}finally{if(i)throw o}}return n}function R(t){if(Array.isArray(t))return t}function N(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}var z=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text",n=t.offset,r=t.content,i=t.properties,o=(N(t,["offset","content","properties"]),"");return"<span\n    style='".concat(o,"'\n    class='highlight highlight-").concat(e.replace(" ","-")," highlight-").concat(e.replace(" ","-"),"-").concat(n,"'\n    data-type='").concat(e,"'\n    data-content='").concat(r,"'\n    data-offset='").concat(n,"'\n    data-properties='").concat(JSON.stringify(i),"'\n    >").concat(r,"</span>")},F=function(t,e){return e.map(function(t){var e=t.type,n=t.offset,r=t.content,i=t.properties,o=z(t,e);return{type:e,offset:n,html:o,content:r,properties:i}})},J=function(t,e){return e.map(function(t){var e=E(t,2),n=e[0],r=e[1];return{type:"html",offset:n,html:r,content:""}})},$=function(t,e){var n=function(t,e){return t.offset-e.offset||("begin"===t.type?-1:0)||("begin"===e.type?1:0)||("end"===t.type?1:0)||("end"===e.type?-1:0)||("html"===t.type?-1:0)||("html"===e.type?1:0)||("text"===t.type?-1:0)||("text"===e.type?1:0)};e.push({type:"begin",offset:0,content:""}),e.push({type:"end",offset:t.length,content:""});var r=e.sort(n),i=r.reduce(function(e,n){var r=e.text_tokens,i=e.current_offset,o=n.offset,a=n.content;if(o<i)return{text_tokens:r,current_offset:i};var s=t.slice(i,o);return r.push({type:"text",offset:i,content:s}),console.log(i),console.log(s),console.log(n),i+=s.length+a.length,{text_tokens:r,current_offset:i}},{text_tokens:[],current_offset:0}),o=i.text_tokens;return L(e).concat(L(o)).sort(n)};function B(t){return W(t)||U(t)||D()}function D(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function U(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function W(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}function q(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function a(t,e){try{var n=o[t](e),a=n.value}catch(t){return void i(t)}n.done?r(a):Promise.resolve(a).then(s,c)}function s(t){a("next",t)}function c(t){a("throw",t)}s()})}}var G={name:"Article",props:["article"],created:function(){var t=q(a.a.mark(function t(){return a.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),watch:{article:function(t){console.log("new value",t),t&&(this.isHTMLReady=!1,this.highlight())}},components:{InteractiveText:H,Tip:_},methods:{onHighlight:function(t){t?(this.isShowingTip=!0,this.tipOffset=t.offsetTop,this.showTip(t.dataset)):this.isShowingTip=!1},showTip:function(t){this.tip=S(t)},highlight:function(){var t=this.article,e=t.title,n=t.text,r=t.html_tags,i=t.entities;if(e){var o=J(n,r),a=F(n,i);console.log(n),console.log(a),this.highlights=B(a).concat(B(o));var s=$(n,this.highlights);console.log(s);var c=s.map(function(t){return t.html||t.content}).join("");console.log(c),c&&(this.rawHtml=c,this.isHTMLReady=!0)}}},data:function(t){var e=t.article,n=e.url,r=e.title,i=e.text,o=e.html,a=e.entities;return{url:n,title:r,text:i,html:o,entities:a,isShowingTip:!1,tipOffset:0,tip:{},isHTMLReady:!1,isAIReady:!1,rawHtml:"",highlights:[]}}},K=G,Q=(n("7703"),n("a523")),X=n("adda"),Y=Object(g["a"])(K,c,l,!1,null,null,null);Y.options.__file="Article.vue";var Z=Y.exports;function tt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){et(t,e,n[e])})}return t}function et(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nt(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function a(t,e){try{var n=o[t](e),a=n.value}catch(t){return void i(t)}n.done?r(a):Promise.resolve(a).then(s,c)}function s(t){a("next",t)}function c(t){a("throw",t)}s()})}}d()(Y,{VContainer:Q["a"],VFlex:b["a"],VImg:X["a"],VLayout:w["a"]});var rt={name:"ReadMode",props:["url"],created:function(){var t=nt(a.a.mark(function t(){var e;return a.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:e=this.url,this.loadArticle(e);case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),data:function(t){t.url;return{isLoading:!0,error:"",article:{}}},watch:{url:function(t){this.isLoading=!0,this.error=!1,this.loadArticle(t)}},methods:{loadArticle:function(){var t=nt(a.a.mark(function t(e){var n,r,i,o,c;return a.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s["a"].analyse(e);case 3:if(n=t.sent,console.log(n),r=n.article,r){t.next=8;break}throw new Error("Bad API response: No post data");case 8:if(i=r.title,o=r.text,c=r.image,o){t.next=11;break}throw new Error("Bad API response: Empty text");case 11:this.article=tt({url:e,title:i,text:o,image:c},n),console.log("this.article",this.article),t.next=19;break;case 15:t.prev=15,t.t0=t["catch"](0),this.error=t.t0.message,console.log("err",t.t0.message);case 19:return t.prev=19,this.isLoading=!1,t.finish(19);case 22:case"end":return t.stop()}},t,this,[[0,15,19,22]])}));return function(e){return t.apply(this,arguments)}}()},components:{Article:Z}},it=rt,ot=n("549c"),at=Object(g["a"])(it,r,i,!1,null,null,null);at.options.__file="ReadMode.vue";e["default"]=at.exports;d()(at,{VContent:ot["a"],VLayout:w["a"]})}}]);
//# sourceMappingURL=readmode.305a888d.js.map